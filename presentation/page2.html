<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DUST: The Five Ghosts in the Machine</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            background-color: #000005;
        }
        .text-glow {
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.2), 0 0 20px rgba(255, 255, 255, 0.1);
        }
        #tooltip {
            position: absolute;
            display: none;
            padding: 8px 12px;
            background-color: rgba(10, 10, 20, 0.85);
            backdrop-filter: blur(5px);
            border: 1px solid #334155;
            color: #E2E8F0;
            border-radius: 8px;
            pointer-events: none;
            font-size: 1rem;
            white-space: nowrap;
            z-index: 50;
        }
         #data-slate {
            /* --- FIX: Centering the pop-up --- */
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
            width: 90%;
            max-width: 420px; /* Increased width for more text */
            padding: 24px;
            background: linear-gradient(145deg, rgba(17, 24, 39, 0.9), rgba(10, 10, 20, 0.95));
            backdrop-filter: blur(10px);
            border: 1px solid #FBBF24;
            color: #FDE68A;
            border-radius: 12px;
            text-align: left;
            z-index: 20;
            box-shadow: 0 0 35px rgba(251, 191, 36, 0.15), 0 0 15px rgba(251, 191, 36, 0.1);
            animation: fadeIn 0.5s ease-out;
            pointer-events: auto;
        }
        #data-slate h3 {
            font-size: 1.5rem;
            font-weight: bold;
            color: #FBBF24;
            margin-bottom: 12px;
            padding-right: 20px; /* Space for close button */
        }
        #data-slate p {
            font-size: 1rem;
            color: #CBD5E1;
            line-height: 1.6;
            margin-bottom: 16px;
        }
        /* --- FIX: Style for the new DUST Perspective section --- */
        #slate-dust-perspective {
            font-size: 0.95rem;
            color: #94A3B8;
            line-height: 1.6;
            border-left: 2px solid #FBBF24;
            padding-left: 16px;
            font-style: italic;
        }
        #close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.5rem;
            color: #9CA3AF;
            cursor: pointer;
            transition: color 0.2s;
        }
        #close-btn:hover {
            color: #FBBF24;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -50%) scale(0.95); }
            to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in-up-1 { animation: fadeInUp 1.5s ease-out 1s forwards; }
        .fade-in-up-2 { animation: fadeInUp 1.5s ease-out 7s forwards; }
    </style>
</head>
<body class="bg-black text-white m-0 p-0">

    <div id="canvas-container" class="absolute top-0 left-0 w-full h-full z-0"></div>
    <div id="tooltip"></div>
    
    <div id="data-slate">
        <div id="close-btn">&times;</div>
        <h3 id="slate-title"></h3>
        <p id="slate-description"></p>
        <!-- --- FIX: New element for the richer info --- -->
        <p id="slate-dust-perspective"></p>
    </div>
    
    <div class="relative w-full h-screen flex flex-col justify-between items-center text-center p-8 z-10 pointer-events-none">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-200 text-glow opacity-0 fade-in-up-1">The Five Ghosts in the Machine.</h1>
        <p id="bottom-text" class="text-lg md:text-xl text-amber-300 opacity-0 fade-in-up-2 pointer-events-auto cursor-pointer">All five paradoxes have a single source.</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            const container = document.getElementById('canvas-container');
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            container.appendChild(renderer.domElement);
            camera.position.z = 12;

            // --- FIX: Added richer info to the data ---
            const starsData = [
                { 
                    name: 'The Duality Paradox', 
                    position: new THREE.Vector3(-6, 3.5, 0), 
                    description: "Quantum mechanics describes particles as waves of probability, yet we only ever observe a single, definite particle. The mechanism of this 'collapse' from a wave to a particle is unknown and represents a fundamental paradox at the heart of reality.",
                    dustPerspective: "DUST Perspective: 'Wave' and 'particle' are not paradoxical states, but two different, controllable energy levels of a single underlying system. The 'collapse' is a physical process, not a random event."
                },
                { 
                    name: 'The Measurement Paradox', 
                    position: new THREE.Vector3(6, 3.5, 0), 
                    description: "The act of observation appears to force reality into a definite state. This implies a nonsensical division between the universe 'before' and 'after' we look at it, giving the observer a seemingly magical role in creating reality.",
                    dustPerspective: "DUST Perspective: The observer is not magical, but physical. The energy of the measurement apparatus physically interacts with the local vacuum, forcing the observed particle into a stable, low-energy 'particle' state. This is a predictable physical interaction, not a paradox."
                },
                { 
                    name: 'The Consciousness Paradox', 
                    position: new THREE.Vector3(0, 0, 0), 
                    description: "The 'hard problem' asks why the objective, electrochemical firing of neurons should produce a subjective, qualitative experience like the feeling of joy or the color red. There is no known bridge between the physical and the mental.",
                    dustPerspective: "DUST Perspective: The bridge is light. Consciousness is a physical, coherent biophoton field generated by the brain. A subjective feeling *is* the physical sensation of that field resonating in a specific, coherent pattern. The mind is not an illusion; it is a measurable physical object."
                },
                { 
                    name: 'The Cosmological Crises', 
                    position: new THREE.Vector3(-4, -3.5, 0), 
                    description: "Our model of the cosmos requires 'Dark Matter' and 'Dark Energy'â€”placeholder terms for 95% of the universe that we cannot see or explain. This is a profound admission that our current understanding of gravity and energy is fundamentally incomplete.",
                    dustPerspective: "DUST Perspective: These are fictions of an incomplete model. DUST proves that cosmic acceleration and galactic rotation are predictable consequences of the vacuum's own dynamics and the evolution of physical constants over time, eliminating the need for dark entities."
                },
                { 
                    name: 'The Mathematical Paradox', 
                    position: new THREE.Vector3(4, -3.5, 0), 
                    description: "The 'unreasonable effectiveness' of mathematics. Why should the abstract, logical relationships invented by the human mind perfectly describe the physical workings of the cosmos? This deep connection has no scientific explanation.",
                    dustPerspective: "DUST Perspective: Mathematics is effective because it is not an invention; it is a discovery. The laws of mathematics are the laws of physics because they both emerge from the fundamental, prime-based geometric structure of the vacuum itself. The universe doesn't obey math; the universe *is* math."
                }
            ];

            function createGlowTexture() {
                const canvas = document.createElement('canvas');
                canvas.width = 128;
                canvas.height = 128;
                const context = canvas.getContext('2d');
                const gradient = context.createRadialGradient(canvas.width / 2, canvas.height / 2, 0, canvas.width / 2, canvas.height / 2, canvas.width / 2);
                gradient.addColorStop(0, 'rgba(255,255,255,1)');
                gradient.addColorStop(0.2, 'rgba(150,200,255,0.7)');
                gradient.addColorStop(0.4, 'rgba(96,165,250,0.3)');
                gradient.addColorStop(1, 'rgba(96,165,250,0)');
                context.fillStyle = gradient;
                context.fillRect(0, 0, canvas.width, canvas.height);
                return new THREE.CanvasTexture(canvas);
            }
            const glowTexture = createGlowTexture();

            const bgStarsGeometry = new THREE.BufferGeometry();
            const bgStarsVertices = [];
            for (let i = 0; i < 10000; i++) {
                const x = (Math.random() - 0.5) * 200;
                const y = (Math.random() - 0.5) * 200;
                const z = (Math.random() - 0.5) * 200;
                bgStarsVertices.push(x, y, z);
            }
            bgStarsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(bgStarsVertices, 3));
            const bgStarsMaterial = new THREE.PointsMaterial({ color: 0x4A5568, size: 0.05, transparent: true, opacity: 0.5 });
            const starfield = new THREE.Points(bgStarsGeometry, bgStarsMaterial);
            scene.add(starfield);

            const stars = [];
            starsData.forEach(data => {
                const starGroup = new THREE.Group();
                starGroup.position.copy(data.position);
                starGroup.userData = data;
                const coreMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff });
                const core = new THREE.Mesh(new THREE.SphereGeometry(0.2, 32, 32), coreMaterial);
                starGroup.add(core);
                const coronaMaterial = new THREE.SpriteMaterial({
                    map: glowTexture,
                    color: 0x60A5FA,
                    transparent: true,
                    blending: THREE.AdditiveBlending,
                    opacity: 0.7,
                    depthWrite: false,
                });
                const corona = new THREE.Sprite(coronaMaterial);
                corona.scale.set(3.5, 3.5, 1);
                starGroup.add(corona);
                scene.add(starGroup);
                stars.push(starGroup);
            });

            const lineMaterial = new THREE.LineBasicMaterial({ color: 0x334155, transparent: true, opacity: 0 });
            const lines = [];
            const connections = [[0,1], [1,4], [4,3], [3,0], [0,2], [1,2], [3,2], [4,2]];
            connections.forEach(conn => {
                const points = [stars[conn[0]].position, stars[conn[1]].position];
                const geometry = new THREE.BufferGeometry().setFromPoints(points);
                const line = new THREE.Line(geometry, lineMaterial.clone());
                scene.add(line);
                lines.push(line);
            });
            let lineFadeProgress = 0;
            const lineFadeStartTime = Date.now() + 2000;

            const raycaster = new THREE.Raycaster();
            const mouse = new THREE.Vector2();
            const tooltip = document.getElementById('tooltip');
            const dataSlate = document.getElementById('data-slate');
            const slateTitle = document.getElementById('slate-title');
            const slateDescription = document.getElementById('slate-description');
            // --- FIX: Get the new element ---
            const slateDustPerspective = document.getElementById('slate-dust-perspective');
            let intersected = null;
            
            function onMouseMove(event) {
                mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
                mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            }

            function onClick(event) {
                if (event.target.id !== 'bottom-text' && intersected) {
                    slateTitle.innerText = intersected.userData.name;
                    slateDescription.innerText = intersected.userData.description;
                    // --- FIX: Populate the new element ---
                    slateDustPerspective.innerText = intersected.userData.dustPerspective;
                    dataSlate.style.display = 'block';
                }
            }
            
            document.getElementById('close-btn').addEventListener('click', () => {
                dataSlate.style.display = 'none';
            });

            window.addEventListener('mousemove', onMouseMove);
            window.addEventListener('click', onClick);

            const clock = new THREE.Clock();
            function animate() {
                requestAnimationFrame(animate);
                const elapsedTime = clock.getElapsedTime();
                starfield.rotation.y += 0.0001;
                starfield.rotation.x += 0.00005;

                if(lineFadeProgress < 1){
                    const elapsed = Date.now() - lineFadeStartTime;
                    lineFadeProgress = Math.min(elapsed / 4000, 1);
                    lines.forEach(line => line.material.opacity = lineFadeProgress * 0.3);
                }

                raycaster.setFromCamera(mouse, camera);
                const intersects = raycaster.intersectObjects(stars.map(s => s.children[0]));

                if (intersects.length > 0) {
                    const parentGroup = intersects[0].object.parent;
                    if (intersected !== parentGroup) {
                        if (intersected) {
                            intersected.children[1].material.color.set(0x60A5FA);
                            intersected.scale.set(1, 1, 1);
                        }
                        intersected = parentGroup;
                        intersected.children[1].material.color.set(0xFBBF24);
                        intersected.scale.set(1.2, 1.2, 1.2);
                        tooltip.style.display = 'block';
                        tooltip.innerText = intersected.userData.name;
                    }
                    const vector = new THREE.Vector3().copy(intersected.position);
                    vector.project(camera);
                    tooltip.style.left = `${(vector.x + 1) / 2 * window.innerWidth + 15}px`;
                    tooltip.style.top = `${-(vector.y - 1) / 2 * window.innerHeight + 15}px`;

                } else {
                    if (intersected) {
                        intersected.children[1].material.color.set(0x60A5FA);
                        intersected.scale.set(1, 1, 1);
                    }
                    intersected = null;
                    tooltip.style.display = 'none';
                }
                
                stars.forEach(star => {
                    star.children[1].rotation.z = elapsedTime * 0.2;
                });

                renderer.render(scene, camera);
            }

            animate();

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }, false);

            document.getElementById('bottom-text').addEventListener('click', (e) => {
                 e.stopPropagation();
                 // This would navigate to the next HTML file in a real project
                 window.location.href = '#'; // Placeholder
            });

        });
    </script>
</body>
</html>
